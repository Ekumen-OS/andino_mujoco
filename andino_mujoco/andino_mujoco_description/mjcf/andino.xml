<mujoco model="andino">
    <compiler angle="radian" meshdir="../meshes" balanceinertia="true"/>

    <asset>
        <material name="3D_Print_Blue" rgba="0 0 1 1"/>
        <material name="Aluminum" rgba="0.79 0.82 0.93 1"/>
        <material name="Plastic_Grey" rgba="0.3 0.3 0.3 1"/>
        <material name="Pure_Black" rgba="0 0 0 1"/>
        <material name="Light_Blue" rgba="0 0.5 0.8 1"/>

        <mesh name="chassis" file="andino/chassis.stl"/>
        <mesh name="chassis_top" file="andino/chassis_top.stl"/>
        <mesh name="caster_base" file="andino/caster_base.stl"/>
        <mesh name="caster_wheel_support" file="andino/caster_wheel_support.stl"/>
        <mesh name="caster_wheel" file="andino/caster_wheel.stl"/>
        <mesh name="wheel" file="components/wheel.stl"/>
        <mesh name="motor" file="andino/motor.stl"/>
        <mesh name="rplidar-a1" file="sensors/rplidar-a1.stl"/>
        <mesh name="camera_mount" file="sensors/camera_mount.stl"/>
    </asset>

    <default>
        <default class="andino">
            <default class="visual">
                <geom type="mesh" contype="0" conaffinity="0" group="1"/>
                <default class="rubber_wheel_visual">
                    <geom material="Plastic_Grey"/>
                </default>
            </default>
            <default class="collision">
                <geom group="2" type="mesh"/>
                <default class="rubber_wheel_collision">
                    <geom quat="1 1 0 0" type="cylinder" mass="0.03" size="0.03 0.010" />
                </default>
            </default>
            <default class="wheel">
                <joint type="hinge" axis="0 1 0" damping="0.001"/>
            </default>
        </default>
    </default>

    <worldbody>
        <body name="chassis" quat="0.707 0 0 -0.707">
            <joint type="free"/>
            <inertial pos="0 0 -0.02" mass="0.5" diaginertia="0.0009 0.0009 0.0016"/>
            <geom mesh="chassis" material="3D_Print_Blue" class="collision" />

            <body name="chassis_top" pos="0 0 0.05">
                <inertial pos="-0.02 0 0" mass="3" diaginertia="0.0018 0.0018 0.0033"/>
                <geom mesh="chassis_top" material="3D_Print_Blue" class="collision"/>
            </body><!-- chassis_top -->

            <body name="right_wheel" pos="0.0185 -0.0675 -0.017">
                <joint name="right_wheel_joint" class="wheel"/>
                <geom mesh="wheel" quat="0 0 -0.707107 -0.707107" class="rubber_wheel_visual"/>
                <geom class="rubber_wheel_collision"/>
            </body><!-- right_wheel -->

            <body name="left_wheel" pos="0.0185 0.0675 -0.017">
                <joint name="left_wheel_joint" class="wheel"/>
                <geom mesh="wheel" quat="0.707107 0.707107 0 0" class="rubber_wheel_visual"/>
                <geom class="rubber_wheel_collision"/>
            </body><!-- left_wheel -->

            <body name="caster_base" pos="-0.076 0 -0.0155" >
                <inertial pos="0 0 0" euler="0 0 0" mass="0.02" diaginertia="5.33e-06 5.33e-06 5.33e-06"/>
                <geom mesh="caster_base" material="Aluminum" class="collision"/>

                <body name="caster_wheel_support" pos="-0.001 0 0" >
                    <inertial pos="0 0 0" mass="0.1" diaginertia="5.33e-06 5.33e-06 5.33e-06"/>
                    <joint name="caster_base_to_caster_wheel_support" type="hinge" axis="0 0 1" damping="0.001"/>
                    <geom mesh="caster_wheel_support" material="Aluminum" class="collision"/>

                    <body name="caster_wheel" pos="-0.015 0.0 -0.02">
                        <joint name="caster_wheel_support_to_caster_wheel" class="wheel"/>
                        <geom mesh="caster_wheel" material="Pure_Black" class="collision"/>
                    </body> <!-- caster_wheel -->

                </body> <!-- caster_wheel_support -->

            </body> <!-- caster_base -->

            <body name="rplidar-al" pos="0.05 0 0.08" >
                <inertial pos="0 0 0" mass="0.1" diaginertia="6.45e-06 6.45e-06 1.12e-05"/>
                <geom mesh="rplidar-a1" quat="-1 0 0 0" material="Plastic_Grey" class="collision"/>
            </body><!-- rplidar-al -->

            <body name="motor_right" pos="0.0015 -0.03775 -0.017">
                <inertial pos="0 0 0" mass="0.35" diaginertia="7.16e-06 4.37e-05 4.50e-05"/>
                <geom mesh="motor" material="Light_Blue" class="collision"/>
            </body><!-- motor_right -->

            <body name="motor_left" pos="0.0015 0.03775 -0.017">
                <inertial pos="0 0 0" mass="0.35" diaginertia="7.16e-06 4.375e-05 4.50e-05"/>
                <geom mesh="motor" material="Light_Blue" class="collision"/>
            </body> <!-- motor_left-->

            <body name="camera_mount" pos="0.085 0 0.025">
                <geom mesh="camera_mount" material="3D_Print_Blue" class="collision"/>
                <camera name="andino_cam" mode="fixed" xyaxes="0 -1 0 0 0 1" pos="-0.1 0 0.09 "/>
            </body> <!-- camera_mount -->

        </body><!-- chassis -->

    </worldbody>

    <!-- Interface -->
    <actuator>
        <!-- actuator range in radians/sec: w=v_max/radius = 0.2/0.03 -->
        <velocity name="right-motor" joint="right_wheel_joint" kv="1" ctrllimited="false"/>
        <velocity name="left-motor" joint="left_wheel_joint" kv="1" ctrllimited="false"/>
    </actuator>

</mujoco>
